<!doctype HTML>
<html>
    
    <head>
        <meta charset="utf-8">
        <title>Login Page</title>
        <style>
            body {
                background-color: maroon;
            }

            h1 {
                text-align: center;
                font-size: 60pt;
                color: gold;
            }
            div {
                margin-top: 25px;
                padding-bottom: 150px;
                height: 150px;
                color: gold;
                text-align: center; 
                font-size: 25px;
            }

            #email {
                height: 25px;
                font-size: 14pt;
            }

            #password {
                height: 25px;
                font-size: 14pt;
                margin-right: 45px; 
            }

            #searchButton {
                height: 50px;
                width: 150px;
                margin-top: 50px;
                font-size: 25px;
            }

            #showPasswordButton {
                height: 15px;
            }
        </style>
    </head>

    <body>
        <h1>Welcome!</h1>
        <div>
            <label for="email">Email: </label>
            <input type="text" id="email"> <br>
            <label for="password">Password: </label>
            <input type="password" id="password"> <br>
            <!--No functionality on Show Password Button yet-->
            <button id="'showPasswordButton">Show Password</button> <br>
            <button id="searchButton">Login</button>
            <p id="searchResult"></p>

        </div>
    </body>
    
    <script>
function handleSearch() {
    const input1 = document.getElementById("email").value.trim();
    const input2 = document.getElementById("password").value.trim();
    const searchResultp = document.getElementById("searchResult");

    const csvFileURL = 'Users.csv';

    fetch(csvFileURL)
        .then(response => response.text())
        .then(data => {
            const rows = data.split("\n");

            let searchResult = "User not found";

            for (let i = 0; i < rows.length; i++) {
                const columns = rows[i].split(",");
                if (columns.length >= 2) {
                    const column1 = columns[0].trim();
                    const column2 = columns[1].trim();

                    if (column1.toLowerCase === input1.toLowerCase && column2 === input2) {
                        searchResult = "Sucess!";
                        // window.location.href = "dashboard.html";
                        break;
                    }
                }
            }

            searchResultp.textContent = searchResult;
        })
        .catch(error => {
            console.error("Error fetching CSV file: " + error);
        });
}

const searchButton = document.getElementById("searchButton");
searchButton.addEventListener("click", handleSearch);

    </script>

</html>